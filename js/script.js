//Hearts
let cardAceHearts = [11, "Ace", "Hearts", "images/cards/hearts/hearts_A.png"];
let cardTwoHearts = [2, "Two", "Hearts", "images/cards/hearts/hearts_2.png"];
let cardThreeHearts = [3, "Three", "Hearts", "images/cards/hearts/hearts_3.png"];
let cardFourHearts = [4, "Four", "Hearts", "images/cards/hearts/hearts_4.png"];
let cardFiveHearts = [5, "Five", "Hearts", "images/cards/hearts/hearts_5.png"];
let cardSixHearts = [6, "Six", "Hearts", "images/cards/hearts/hearts_6.png"];
let cardSevenHearts = [7, "Seven", "Hearts", "images/cards/hearts/hearts_7.png"];
let cardEightHearts = [8, "Eight", "Hearts", "images/cards/hearts/hearts_8.png"];
let cardNineHearts = [9, "Nine", "Hearts", "images/cards/hearts/hearts_9.png"];
let cardTenHearts = [10, "Ten", "Hearts", "images/cards/hearts/hearts_10.png"];
let cardJackHearts = [10, "Jack", "Hearts", "images/cards/hearts/hearts_J.png"];
let cardQueenHearts = [10, "Queen", "Hearts", "images/cards/hearts/hearts_Q.png"];
let cardKingHearts = [10, "King", "Hearts", "images/cards/hearts/hearts_K.png"];
//Diamonds
let cardAceDiamonds = [11, "Ace", "Diamonds", 'images/cards/diamonds/diamonds_A.png'];
let cardTwoDiamonds = [2, "Two", "Diamonds", 'images/cards/diamonds/diamonds_2.png'];
let cardThreeDiamonds = [3, "Three", "Diamonds", 'images/cards/diamonds/diamonds_3.png'];
let cardFourDiamonds = [4, "Four", "Diamonds", 'images/cards/diamonds/diamonds_4.png'];
let cardFiveDiamonds = [5, "Five", "Diamonds", 'images/cards/diamonds/diamonds_5.png'];
let cardSixDiamonds = [6, "Six", "Diamonds", 'images/cards/diamonds/diamonds_6.png'];
let cardSevenDiamonds = [7, "Seven", "Diamonds", 'images/cards/diamonds/diamonds_7.png'];
let cardEightDiamonds = [8, "Eight", "Diamonds", 'images/cards/diamonds/diamonds_8.png'];
let cardNineDiamonds = [9, "Nine", "Diamonds", 'images/cards/diamonds/diamonds_9.png'];
let cardTenDiamonds = [10, "Ten", "Diamonds", 'images/cards/diamonds/diamonds_10.png'];
let cardJackDiamonds = [10, "Jack", "Diamonds", 'images/cards/diamonds/diamonds_J.png'];
let cardQueenDiamonds = [10, "Queen", "Diamonds", 'images/cards/diamonds/diamonds_Q.png'];
let cardKingDiamonds = [10, "King", "Diamonds", 'images/cards/diamonds/diamonds_K.png'];
//Clubs
let cardAceClubs = [11, "Ace", "Clubs", 'images/cards/clubs/clubs_A.png'];
let cardTwoClubs = [2, "Two", "Clubs", 'images/cards/clubs/clubs_2.png'];
let cardThreeClubs = [3, "Three", "Clubs", 'images/cards/clubs/clubs_3.png'];
let cardFourClubs = [4, "Four", "Clubs", 'images/cards/clubs/clubs_4.png'];
let cardFiveClubs = [5, "Five", "Clubs", 'images/cards/clubs/clubs_5.png'];
let cardSixClubs = [6, "Six", "Clubs", 'images/cards/clubs/clubs_6.png'];
let cardSevenClubs = [7, "Seven", "Clubs", 'images/cards/clubs/clubs_7.png'];
let cardEightClubs = [8, "Eight", "Clubs", 'images/cards/clubs/clubs_8.png'];
let cardNineClubs = [9, "Nine", "Clubs", 'images/cards/clubs/clubs_9.png'];
let cardTenClubs = [10, "Ten", "Clubs", 'images/cards/clubs/clubs_10.png'];
let cardJackClubs = [10, "Jack", "Clubs", 'images/cards/clubs/clubs_J.png'];
let cardQueenClubs = [10, "Queen", "Clubs", 'images/cards/clubs/clubs_Q.png'];
let cardKingClubs = [10, "King", "Clubs", 'images/cards/clubs/clubs_K.png'];
//Spades
let cardAceSpades = [11, "Ace", "Spades", 'images/cards/spades/spades_A.png'];
let cardTwoSpades = [2, "Two", "Spades", 'images/cards/spades/spades_2.png'];
let cardThreeSpades = [3, "Three", "Spades", 'images/cards/spades/spades_3.png'];
let cardFourSpades = [4, "Four", "Spades", 'images/cards/spades/spades_4.png'];
let cardFiveSpades = [5, "Five", "Spades", 'images/cards/spades/spades_5.png'];
let cardSixSpades = [6, "Six", "Spades", 'images/cards/spades/spades_6.png'];
let cardSevenSpades = [7, "Seven", "Spades", 'images/cards/spades/spades_7.png'];
let cardEightSpades = [8, "Eight", "Spades", 'images/cards/spades/spades_8.png'];
let cardNineSpades = [9, "Nine", "Spades", 'images/cards/spades/spades_9.png'];
let cardTenSpades = [10, "Ten", "Spades", 'images/cards/spades/spades_10.png'];
let cardJackSpades = [10, "Jack", "Spades", 'images/cards/spades/spades_J.png'];
let cardQueenSpades = [10, "Queen", "Spades", 'images/cards/spades/spades_Q.png'];
let cardKingSpades = [10, "King", "Spades", 'images/cards/spades/spades_K.png'];

let allCards = [
    //Hearts
    cardAceHearts, cardTwoHearts, cardThreeHearts, cardFourHearts, cardFiveHearts, cardSixHearts, cardSevenHearts,
    cardEightHearts, cardNineHearts, cardTenHearts, cardJackHearts, cardQueenHearts, cardKingHearts,
    //Diamonds
    cardAceDiamonds, cardTwoDiamonds, cardThreeDiamonds, cardFourDiamonds, cardFiveDiamonds, cardSixDiamonds, cardSevenDiamonds,
    cardEightDiamonds, cardNineDiamonds, cardTenDiamonds, cardJackDiamonds, cardQueenDiamonds, cardKingDiamonds,
    //Clubs
    cardAceClubs, cardTwoClubs, cardThreeClubs, cardFourClubs, cardFiveClubs, cardSixClubs, cardSevenClubs,
    cardEightClubs, cardNineClubs, cardTenClubs, cardJackClubs, cardQueenClubs, cardKingClubs,
    //Spades
    cardAceSpades, cardTwoSpades, cardThreeSpades, cardFourSpades, cardFiveSpades, cardSixSpades, cardSevenSpades,
    cardEightSpades, cardNineSpades, cardTenSpades, cardJackSpades, cardQueenSpades, cardKingSpades
];

let playerCount = 0;
let dealerCount = 0
let playerAceCount = 0;
let dealerAceCount = 0;
let dealerOutput = document.querySelector('.dealerCount');
let playerOutput = document.querySelector('.playerCount');
let cardOutputDealer = document.querySelector('.cardDisplayDealer')
let cardOutputPlayer = document.querySelector('.cardDisplayPlayer')
let startButton = document.querySelector('#playButton');
let hitButton = document.querySelector('#hitButton');
let standButton = document.querySelector('#standButton');
let playerOutcome = document.querySelector('.playerOutcome');
let dealerOutcome = document.querySelector('.dealerOutcome');
let imageResetDealer = document.querySelector('.cardDisplayImageDealer');
let imageResetPlayer = document.querySelector('.cardDisplayImagePlayer');

function startGame() {
    playerStartCards();
    dealerStartCards();
    checkForTie();
    removeDealButton();
}
function playerStartCards(){
    const getRandomCard = selectRandomWithoutRepetition(allCards);
    let randomCard = getRandomCard()
    //let randomCard = allCards[Math.floor(Math.random()*allCards.length)];
    console.log(allCards)
    let getRandomCardTwo = selectRandomWithoutRepetition(allCards);
    let randomCardTwo = getRandomCardTwo()
    //let randomCardTwo = allCards[Math.floor(Math.random()*allCards.length)];
    console.log(allCards);
    
    playerCount += randomCard[0];
    playerCount += randomCardTwo[0];
    playerOutput.innerHTML = playerCount;
    
    playerCount = checkForAce(playerCount, randomCard[1]);
    playerCount = checkForAce(playerCount, randomCardTwo[1]);
    playerOutput.innerHTML = playerCount;
    cardOutputPlayer.innerHTML = `${randomCard[1]} of ${randomCard[2]}` + `, ${randomCardTwo[1]} of ${randomCardTwo[2]}`;
    
    let cardImage = new Image();
    cardImage.src = randomCard[3]
    document.querySelector('.cardDisplayImagePlayer').appendChild(cardImage);
    console.log(randomCard[1],randomCardTwo[1])
    
    let cardImageTwo = new Image()
    cardImageTwo.src = randomCardTwo[3]
    document.querySelector('.cardDisplayImagePlayer').appendChild(cardImageTwo);

    if(playerCount === 21){
        playerOutcome.innerHTML = "Blackjack!";
        endGame();
    }
}
function dealerStartCards(){
    const getRandomCard = selectRandomWithoutRepetition(allCards);
    let randomCard = getRandomCard()
    //let randomCard = allCards[Math.floor(Math.random()*allCards.length)];
    console.log(allCards)
    let getRandomCardTwo = selectRandomWithoutRepetition(allCards);
    let randomCardTwo = getRandomCardTwo()
    //let randomCardTwo = allCards[Math.floor(Math.random()*allCards.length)];
    console.log(allCards);
    dealerCount += randomCard[0];
    dealerCount += randomCardTwo[0];
    dealerOutput.innerHTML = dealerCount;

    dealerCount = checkForAce(dealerCount, randomCard[1]);
    dealerCount = checkForAce(dealerCount, randomCardTwo[1]);
    dealerOutput.innerHTML = dealerCount;

    cardOutputDealer.innerHTML = `${randomCard[1]} of ${randomCard[2]}` + `, ${randomCardTwo[1]} of ${randomCardTwo[2]}`;
    
    let cardImage = new Image();
    cardImage.src = randomCard[3]
    document.querySelector('.cardDisplayImageDealer').appendChild(cardImage);
    
    
    let cardImageTwo = new Image()
    cardImageTwo.src = randomCardTwo[3]
    document.querySelector('.cardDisplayImageDealer').appendChild(cardImageTwo);

    if(dealerCount === 21){
        dealerOutcome.innerHTML = "Blackjack!";
        endGame();
    }
}
function cardCount() {
    const getRandomCard = selectRandomWithoutRepetition(allCards);
    let randomCard = getRandomCard()
    //let randomCard = allCards[Math.floor(Math.random()*allCards.length)];
    console.log(allCards)
        playerCount += randomCard[0];   
        playerOutput.innerHTML = playerCount;
        cardOutputPlayer.innerHTML += `, ${randomCard[1]} of ${randomCard[2]}`;
        
        playerCount = checkForAce(playerCount, randomCard[1]);
        playerOutput.innerHTML = playerCount;
        console.log(playerCount)

        let cardImage = new Image();
        cardImage.src = randomCard[3]
        document.querySelector('.cardDisplayImagePlayer').appendChild(cardImage);

    if(playerCount === 21){
        playerOutCome(true);
        endGame();
    }else if(playerCount > 21) {
        playerOutCome(false);
        endGame();
    };
}
function standCount() {
    const getRandomCard = selectRandomWithoutRepetition(allCards);
    let randomCard = getRandomCard()
    //let randomCard = allCards[Math.floor(Math.random()*allCards.length)];
    console.log(allCards)
        dealerCount += randomCard[0]; 
        dealerOutput.innerHTML = dealerCount;
        cardOutputDealer.innerHTML += `, ${randomCard[1]} of ${randomCard[2]}`;
        
        dealerCount = checkForAce(dealerCount, randomCard[1]);
        dealerOutput.innerHTML = dealerCount;
        console.log(randomCard[1])
        console.log(dealerCount)
        

        let cardImage = new Image();
        cardImage.src = randomCard[3]
        document.querySelector('.cardDisplayImageDealer').appendChild(cardImage);

        if(dealerCount === 21){
            playerOutCome(false);
            endGame();
        }else if(dealerCount > 21) {
            playerOutCome(true);
            endGame();
        };
}
function restartGame(){
    playerCount = 0
    dealerCount = 0
    playerAceCount = 0;
    dealerAceCount = 0;
    dealerOutput.innerHTML = "";
    playerOutput.innerHTML = "";
    playerOutcome.innerHTML = "";
    dealerOutcome.innerHTML = "";
    cardOutputDealer.innerHTML = "";
    cardOutputPlayer.innerHTML = "";
    imageResetDealer.innerHTML = "";
    imageResetPlayer.innerHTML = "";
    hitButton.disabled = false;
    standButton.disabled = false;
    startButton.style.display = "";
    
}
function checkForTie(){
    if(dealerCount === 21 && playerCount === 21){
        dealerOutcome.innerHTML = "Tie!";
        playerOutcome.innerHTML = "Tie";
    }else{
        return
    }
}
function endGame() {
    if(dealerCount >= 21 || playerCount >= 21){
        hitButton.disabled = true;
        standButton.disabled = true;
    }else{
        return
    }
}
function checkForAce(totalHand, cardAce) {
    while(totalHand > 21 && cardAce === "Ace" ){
        totalHand -= 10;
    } 
    return totalHand;
}
function removeDealButton() {
    startButton.style.display = "none";
}
function playerOutCome(isWin) {
    // Create backdrop element  
    const backdrop = document.createElement('div');
    backdrop.className = 'backdrop';

    // Create modal element
    const modal = document.createElement('div');
    modal.className = 'modal';

    // Check if player wins with isWin, otherwise display "You lose!"
    modal.textContent = isWin ? "You win!" : "You lose!";

    // Append modal to the backdrop
    backdrop.appendChild(modal);

    // Append the backdrop to the document body
    document.body.appendChild(backdrop);

    // Add a click event to close the modal
    backdrop.addEventListener('click', () => {
        document.body.removeChild(backdrop);
    });
}
function selectRandomWithoutRepetition(array) {
    return function () {
        if (array.length === 0) {
            return null; // No more objects to select
        }
        const randomIndex = Math.floor(Math.random() * array.length);
        return array.splice(randomIndex, 1)[0]; // Remove and return the object
    };
}